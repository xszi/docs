# å¯è§†åŒ–çš„JavaScript â€”â€” ï¼ˆä¸‰ï¼‰ä½œç”¨åŸŸï¼ˆé“¾ï¼‰

ã€ä¸‰ã€‘[JavaScript Visualized: Scope (Chain)](https://dev.to/lydiahallie/javascript-visualized-scope-chain-13pd)


æ˜¯æ—¶å€™æ¥ä»‹ç»ä¸‹ä½œç”¨åŸŸï¼ˆé“¾ï¼‰äº†ã€‚å‡è®¾æ‚¨å·²ç»äº†è§£æ‰§è¡Œä¸Šä¸‹æ–‡çš„åŸºç¡€ï¼Œä¸ç®¡æ€æ ·ï¼Œæˆ‘ä¼šå¾ˆå¿«å°±æ‰§è¡Œä¸Šä¸‹æ–‡å‘è¡¨ä¸€ç¯‡æ–‡ç« ğŸ˜ƒ

é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç ï¼š
```js
const name = "Lydia"
const age = 21
const city = "San Francisco"


function getPersonInfo() {
  const name = "Sarah"
  const age = 22

  return `${name} is ${age} and lives in ${city}`
}

console.log(getPersonInfo())
```
æˆ‘ä»¬è°ƒç”¨`getPersonInfo`å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«å€¼`name`ï¼Œ`age`å’Œ`city`çš„å­—ç¬¦ä¸²`ï¼š
`Sarah is 22 and lives in San Francisco`ã€‚ä½†æ˜¯ï¼Œè¯¥`getPersonInfo`å‡½æ•°ä¸åŒ…å«åä¸ºcityğŸ¤¨çš„å˜é‡ã€‚å®ƒæ€ä¹ˆçŸ¥é“çš„`city`å€¼ï¼Ÿ

é¦–å…ˆï¼Œä¸ºä¸åŒçš„ä¸Šä¸‹æ–‡è®¾ç½®å­˜å‚¨ç©ºé—´ã€‚æˆ‘ä»¬æœ‰é»˜è®¤çš„å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆ`window`åœ¨æµè§ˆå™¨ä¸­ï¼Œ`global`åœ¨`Node`ï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¸º`getPersonInfo`è°ƒç”¨å‡†å¤‡çš„å±€éƒ¨ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚

å¯¹äºè¯¥`getPersonInfo`å‡½æ•°ï¼Œä½œç”¨åŸŸé“¾çœ‹èµ·æ¥åƒè¿™æ ·:

![89b9buizhevs0jf6djyn](https://user-images.githubusercontent.com/23453305/118239471-683ba700-b4cc-11eb-86ea-9518fb2b6d50.png)


åŸºæœ¬ä¸Šè¯´ï¼Œä½œç”¨åŸŸé“¾æ˜¯å¯¹å¯¹è±¡çš„â€œå¼•ç”¨é“¾â€ï¼Œè¿™äº›å¯¹è±¡åŒ…å«å¯¹åœ¨è¯¥æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å¯å¼•ç”¨çš„å€¼ï¼ˆå’Œå…¶ä»–ä½œç”¨åŸŸï¼‰çš„å¼•ç”¨ã€‚ï¼ˆâ›“ï¼šâ€œå˜¿ï¼Œè¿™äº›éƒ½æ˜¯æ‚¨å¯ä»¥åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­å¼•ç”¨çš„æ‰€æœ‰å€¼â€ã€‚ï¼‰ä½œç”¨åŸŸé“¾æ˜¯åœ¨åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æ—¶åˆ›å»ºçš„ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯åœ¨è¿è¡Œæ—¶åˆ›å»ºçš„ï¼

ä½†æ˜¯ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¸€èˆ¬ä¸ä¼šè®¨è®ºæ´»åŠ¨å¯¹è±¡æˆ–æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬åªå…³æ³¨**ä½œç”¨åŸŸ**ï¼åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ é”®/å€¼å¯¹ è¡¨ç¤ºä½œç”¨åŸŸé“¾å¯¹å˜é‡çš„å¼•ç”¨ã€‚

![iala2et7bg9bgdj4c2lg](https://user-images.githubusercontent.com/23453305/118239504-72f63c00-b4cc-11eb-93b2-d05e67fda14c.png)

å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾å¼•ç”¨äº†3ä¸ªå˜é‡ï¼š`name`å¸¦æœ‰å€¼ `Lydia`ï¼Œ`age`å¸¦æœ‰å€¼`21`ï¼Œ`city`å¸¦æœ‰å€¼ `San Francisco`ã€‚åœ¨å±€éƒ¨ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨äº†2ä¸ªå˜é‡ï¼š`name`ä½¿ç”¨å€¼ `Sarah` å’Œ `age` ä½¿ç”¨å€¼ 22ã€‚

å½“æˆ‘ä»¬å°è¯•è®¿é—®`getPersonInfo`å‡½æ•°ä¸­çš„å˜é‡æ—¶ï¼Œå¼•æ“é¦–å…ˆæ£€æŸ¥å±€éƒ¨ä½œç”¨åŸŸé“¾ã€‚

![xn17f0t54acz8tiq7122](https://user-images.githubusercontent.com/23453305/118241253-85717500-b4ce-11eb-9048-90ddf27c4288.gif)

å±€éƒ¨ä½œç”¨åŸŸé“¾å…·æœ‰å¯¹`name`å’Œ`age`çš„å¼•ç”¨ï¼`name`å€¼ä¸º`Sarah`ï¼Œ`age`å€¼ä¸º`22`ã€‚ä½†æ˜¯ç°åœ¨ï¼Œå½“å®ƒå°è¯•è®¿é—®`city`æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

ä¸ºäº†æ‰¾åˆ°cityçš„å€¼ï¼Œå¼•æ“ä¼šâ€œæ²¿ä½œç”¨åŸŸé“¾â€æŸ¥æ‰¾ã€‚è¿™æ„å‘³ç€å¼•æ“ä¸ä¼šè½»æ˜“æ”¾å¼ƒï¼šå®ƒä¼šåŠªåŠ›æŸ¥çœ‹æ˜¯å¦å¯ä»¥åœ¨å±€éƒ¨ä½œç”¨åŸŸå¼•ç”¨çš„å¤–éƒ¨ä½œç”¨åŸŸï¼ˆåœ¨å½“å‰æƒ…å†µä¸‹ä¸ºå…¨å±€å¯¹è±¡ï¼‰ä¸­æ‰¾åˆ°å˜é‡`city`çš„å€¼ã€‚

![z9iclg23rmbpts7meoq6](https://user-images.githubusercontent.com/23453305/118242073-7ccd6e80-b4cf-11eb-9e5f-2c4c0e7ab5fd.gif)

åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œ`city`å˜é‡çš„å€¼å£°æ˜äº†`San Francisco`ï¼Œå› æ­¤å¼•ç”¨äº†è¯¥å˜é‡`city`ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†å˜é‡çš„å€¼ï¼Œè¯¥å‡½æ•°`getPersonInfo`å¯ä»¥è¿”å›å­—ç¬¦ä¸²`Sarah is 22 and lives in San Francisco`ğŸ‰ã€‚

**æ‚¨å¯ä»¥ä½¿ç”¨å¤–éƒ¨ä½œç”¨åŸŸï¼Œä½†ä¸èƒ½è®¿é—®æ›´å†…éƒ¨ä½œç”¨åŸŸ**ã€‚å¯ä»¥å½¢è±¡åœ°çœ‹ï¼Œç±»ä¼¼ä¸€ç§ç€‘å¸ƒï¼š

![image](https://user-images.githubusercontent.com/23453305/118242626-201e8380-b4d0-11eb-8c37-61b0ad4296df.png)

å¯ä»¥æ›´æ·±ï¼š

![image](https://user-images.githubusercontent.com/23453305/118242778-43493300-b4d0-11eb-9d72-a4f4a0da3282.png)

è®©æˆ‘ä»¬ä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼š

![image](https://user-images.githubusercontent.com/23453305/118242863-5825c680-b4d0-11eb-9109-7ade54150298.png)

å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œä½†æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¸åŒï¼šæˆ‘ä»¬ä»…åœ¨`getPersonInfo`å‡½æ•°å†…å£°æ˜`city`ï¼Œç°åœ¨ä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸå†…ã€‚æˆ‘ä»¬æ²¡æœ‰è°ƒç”¨è¯¥getPersonInfoå‡½æ•°ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰åˆ›å»ºå±€éƒ¨ä¸Šä¸‹æ–‡ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬è¯•å›¾è®¿é—®å…¨å±€ä½œç”¨åŸŸå†…çš„`name`ï¼Œ`age`å’Œ`city`ã€‚

![f3wvlo4c3gqf3mve1g0n](https://user-images.githubusercontent.com/23453305/118244813-8c9a8200-b4d2-11eb-8096-016e66baa175.gif)

å®ƒæŠ›å‡ºä¸€ä¸ª`ReferenceError`ï¼å®ƒåœ¨å…¨å±€ä½œç”¨åŸŸä¸­æ‰¾ä¸åˆ°ä¸€ä¸ªå«åšcityçš„å˜é‡çš„å¼•ç”¨ï¼Œå¹¶æ²¡æœ‰å¤–éƒ¨ä½œç”¨åŸŸå¯å¯»æ‰¾ï¼Œä¹Ÿä¸èƒ½å»æŸ¥æ‰¾å†…éƒ¨ä½œç”¨åŸŸé“¾ã€‚

è¿™æ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä½œç”¨åŸŸæ¥â€œä¿æŠ¤â€å˜é‡å¹¶é‡æ–°ä½¿ç”¨å˜é‡ã€‚

é™¤äº†å…¨å±€å’Œå±€éƒ¨ä½œç”¨åŸŸå¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå—ä½œç”¨åŸŸã€‚ç”¨`let`ï¼Œ`const`å…³é”®å­—å£°æ˜çš„å˜é‡çš„ä½œç”¨åŸŸï¼Œåœ¨æœ€æ¥è¿‘çš„å¤§æ‹¬å·èŒƒå›´å†…ï¼ˆ**{}**ï¼‰ã€‚

```js
const age = 21

function checkAge() {
  if (age < 21) {
    const message = "You cannot drink!"
    return message
  } else {
    const message = "You can drink!"
    return message
  }
} 
```

ä½œç”¨åŸŸå¯è§†åŒ–ä¸ºï¼š

![image](https://user-images.githubusercontent.com/23453305/118246361-7097e000-b4d4-11eb-9fd4-71865b2f7ec4.png)

è¿™é‡Œæœ‰ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸå’Œä¸¤ä¸ªå—ä½œç”¨åŸŸã€‚ç”±äº`message`å˜é‡çš„ä½œç”¨åŸŸç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œå› æ­¤æˆ‘ä»¬èƒ½å¤Ÿå¯¹å˜é‡è¿›è¡Œä¸¤æ¬¡å£°æ˜ã€‚

**å¿«é€Ÿå›é¡¾ï¼š**

* å¯ä»¥å°†**ä½œç”¨åŸŸé“¾**è§†ä¸ºå¯ä»¥åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­è®¿é—®çš„å€¼çš„å¼•ç”¨é“¾ã€‚
* ä½œç”¨åŸŸå¯ä»¥é‡ç”¨åœ¨ä½œç”¨åŸŸé“¾å¤–éƒ¨å®šä¹‰çš„å˜é‡åç§°ï¼Œå› ä¸ºå®ƒåªèƒ½è®¿é—®ä½œç”¨åŸŸé“¾å¤–éƒ¨å˜é‡ï¼Œè€Œä¸èƒ½è®¿é—®ä½œç”¨åŸŸå†…éƒ¨å˜é‡ã€‚

ã€å®Œã€‘
