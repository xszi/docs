<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>可视化的JavaScript —— （三）作用域（链） | 行书子</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/docs/logo.png">
    <meta name="description" content="文档记录">
    
    <link rel="preload" href="/docs/assets/css/0.styles.ec62b53c.css" as="style"><link rel="preload" href="/docs/assets/js/app.dc884916.js" as="script"><link rel="preload" href="/docs/assets/js/2.d55b7ed5.js" as="script"><link rel="preload" href="/docs/assets/js/32.cd1745a2.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.5f740ad3.js"><link rel="prefetch" href="/docs/assets/js/11.f54b3368.js"><link rel="prefetch" href="/docs/assets/js/12.0db641ab.js"><link rel="prefetch" href="/docs/assets/js/13.ca54d79b.js"><link rel="prefetch" href="/docs/assets/js/14.38146abb.js"><link rel="prefetch" href="/docs/assets/js/15.06fcc698.js"><link rel="prefetch" href="/docs/assets/js/16.bf2884e0.js"><link rel="prefetch" href="/docs/assets/js/17.f6ebf6e7.js"><link rel="prefetch" href="/docs/assets/js/18.58c68ed2.js"><link rel="prefetch" href="/docs/assets/js/19.bcccd12c.js"><link rel="prefetch" href="/docs/assets/js/20.7842e092.js"><link rel="prefetch" href="/docs/assets/js/21.18769ae2.js"><link rel="prefetch" href="/docs/assets/js/22.08ec8cf7.js"><link rel="prefetch" href="/docs/assets/js/23.f899a7c4.js"><link rel="prefetch" href="/docs/assets/js/24.8e82b120.js"><link rel="prefetch" href="/docs/assets/js/25.a80e875c.js"><link rel="prefetch" href="/docs/assets/js/26.e4629eb9.js"><link rel="prefetch" href="/docs/assets/js/27.9d8604a8.js"><link rel="prefetch" href="/docs/assets/js/28.5144fdbe.js"><link rel="prefetch" href="/docs/assets/js/29.9db545a8.js"><link rel="prefetch" href="/docs/assets/js/3.7810185e.js"><link rel="prefetch" href="/docs/assets/js/30.0bff5648.js"><link rel="prefetch" href="/docs/assets/js/31.af0a2225.js"><link rel="prefetch" href="/docs/assets/js/33.3cefacce.js"><link rel="prefetch" href="/docs/assets/js/34.37d8a377.js"><link rel="prefetch" href="/docs/assets/js/35.925dc186.js"><link rel="prefetch" href="/docs/assets/js/36.aae85628.js"><link rel="prefetch" href="/docs/assets/js/4.77a548c8.js"><link rel="prefetch" href="/docs/assets/js/5.5fd3c55b.js"><link rel="prefetch" href="/docs/assets/js/6.706caab8.js"><link rel="prefetch" href="/docs/assets/js/7.74938af9.js"><link rel="prefetch" href="/docs/assets/js/8.b788e12b.js"><link rel="prefetch" href="/docs/assets/js/9.c179b739.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.ec62b53c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">行书子</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/xszi/javascript-algorithms" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端算法
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://xszi.github.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  机器学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://xszi.github.io/docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  感悟杂记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.github.com/xszi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/xszi/javascript-algorithms" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端算法
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://xszi.github.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  机器学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://xszi.github.io/docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  感悟杂记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.github.com/xszi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端译站</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/translation/category.html" class="sidebar-link">目录预览</a></li><li><a href="/docs/translation/nginx.html" class="sidebar-link">我希望我早点认识Nginx</a></li><li><a href="/docs/translation/callstack.html" class="sidebar-link">通过两个示例来解释递归和和调用堆栈</a></li><li><a href="/docs/translation/docker.html" class="sidebar-link">通过租用办公空间例子来解释Docker容器</a></li><li><a href="/docs/translation/nodeq.html" class="sidebar-link">关于Node.js的20个面试题</a></li><li><a href="/docs/translation/float.html" class="sidebar-link">将元素浮动到底角</a></li><li><a href="/docs/translation/eventloop.html" class="sidebar-link">可视化的JavaScript —— （一）事件循环</a></li><li><a href="/docs/translation/hoisting.html" class="sidebar-link">可视化的JavaScript —— （二）提升</a></li><li><a href="/docs/translation/scope.html" aria-current="page" class="active sidebar-link">可视化的JavaScript —— （三）作用域（链）</a></li><li><a href="/docs/translation/jsengine.html" class="sidebar-link">可视化的JavaScript —— （四）JS引擎</a></li><li><a href="/docs/translation/prototype.html" class="sidebar-link">可视化的JavaScript —— （五）原型继承</a></li><li><a href="/docs/translation/geniterator.html" class="sidebar-link">可视化的JavaScript —— （六）Generators 和 Iterators</a></li><li><a href="/docs/translation/promise.html" class="sidebar-link">可视化的JavaScript —— （七）Promises 和 Async/Await</a></li><li><a href="/docs/translation/stream.html" class="sidebar-link">NodeJS 流的可视化指南</a></li><li><a href="/docs/translation/chrometool.html" class="sidebar-link">使用 Chrome DevTools 高效调试 JavaScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>备忘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/review/memo.html" class="sidebar-link">知识复习</a></li><li><a href="/docs/review/plan.html" class="sidebar-link">计划</a></li><li><a href="/docs/review/trend.html" class="sidebar-link">前端趋势</a></li><li><a href="/docs/review/question.html" class="sidebar-link">前端开发过程遇到的问题 / 建议</a></li><li><a href="/docs/review/html.html" class="sidebar-link">html备忘</a></li><li><a href="/docs/review/css.html" class="sidebar-link">css备忘</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>训练专题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/topic/sourcemap.html" class="sidebar-link">SourceMap</a></li><li><a href="/docs/topic/hmr.html" class="sidebar-link">HMR原理</a></li><li><a href="/docs/topic/algorithms.html" class="sidebar-link">算法</a></li><li><a href="/docs/topic/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/docs/topic/monitor.html" class="sidebar-link">前端监控</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/typescript/intro.html" class="sidebar-link">安装 TypeScript</a></li><li><a href="/docs/typescript/install.html" class="sidebar-link">编写第一个 TypeScript 程序</a></li><li><a href="/docs/typescript/start.html" class="sidebar-link">初识 TypeScript</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="可视化的javascript-三-作用域-链"><a href="#可视化的javascript-三-作用域-链" class="header-anchor">#</a> 可视化的JavaScript —— （三）作用域（链）</h1> <p>【三】<a href="https://dev.to/lydiahallie/javascript-visualized-scope-chain-13pd" target="_blank" rel="noopener noreferrer">JavaScript Visualized: Scope (Chain)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>是时候来介绍下作用域（链）了。假设您已经了解执行上下文的基础，不管怎样，我会很快就执行上下文发表一篇文章😃</p> <p>首先让我们看下面的代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;Lydia&quot;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">21</span>
<span class="token keyword">const</span> city <span class="token operator">=</span> <span class="token string">&quot;San Francisco&quot;</span>


<span class="token keyword">function</span> <span class="token function">getPersonInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;Sarah&quot;</span>
  <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">22</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and lives in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>city<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getPersonInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>我们调用<code>getPersonInfo</code>函数，该函数返回一个包含值<code>name</code>，<code>age</code>和<code>city</code>的字符串<code>：</code>Sarah is 22 and lives in San Francisco<code>。但是，该</code>getPersonInfo<code>函数不包含名为city🤨的变量。它怎么知道的</code>city`值？</p> <p>首先，为不同的上下文设置存储空间。我们有默认的全局上下文（<code>window</code>在浏览器中，<code>global</code>在<code>Node</code>），以及一个为<code>getPersonInfo</code>调用准备的局部上下文，每个上下文都有一个作用域链。</p> <p>对于该<code>getPersonInfo</code>函数，作用域链看起来像这样:</p> <p><img src="https://user-images.githubusercontent.com/23453305/118239471-683ba700-b4cc-11eb-86ea-9518fb2b6d50.png" alt="89b9buizhevs0jf6djyn"></p> <p>基本上说，作用域链是对对象的“引用链”，这些对象包含对在该执行上下文中可引用的值（和其他作用域）的引用。（⛓：“嘿，这些都是您可以在此上下文中引用的所有值”。）作用域链是在创建执行上下文时创建的，这意味着它是在运行时创建的！</p> <p>但是，在本文中，我一般不会讨论活动对象或执行上下文，我们只关注<strong>作用域</strong>！在以下示例中，执行上下文中的 键/值对 表示作用域链对变量的引用。</p> <p><img src="https://user-images.githubusercontent.com/23453305/118239504-72f63c00-b4cc-11eb-93b2-d05e67fda14c.png" alt="iala2et7bg9bgdj4c2lg"></p> <p>全局执行上下文的作用域链引用了3个变量：<code>name</code>带有值 <code>Lydia</code>，<code>age</code>带有值<code>21</code>，<code>city</code>带有值 <code>San Francisco</code>。在局部上下文中，我们引用了2个变量：<code>name</code>使用值 <code>Sarah</code> 和 <code>age</code> 使用值 22。</p> <p>当我们尝试访问<code>getPersonInfo</code>函数中的变量时，引擎首先检查局部作用域链。</p> <p><img src="https://user-images.githubusercontent.com/23453305/118241253-85717500-b4ce-11eb-9048-90ddf27c4288.gif" alt="xn17f0t54acz8tiq7122"></p> <p>局部作用域链具有对<code>name</code>和<code>age</code>的引用！<code>name</code>值为<code>Sarah</code>，<code>age</code>值为<code>22</code>。但是现在，当它尝试访问<code>city</code>时会发生什么？</p> <p>为了找到city的值，引擎会“沿作用域链”查找。这意味着引擎不会轻易放弃：它会努力查看是否可以在局部作用域引用的外部作用域（在当前情况下为全局对象）中找到变量<code>city</code>的值。</p> <p><img src="https://user-images.githubusercontent.com/23453305/118242073-7ccd6e80-b4cf-11eb-9e5f-2c4c0e7ab5fd.gif" alt="z9iclg23rmbpts7meoq6"></p> <p>在全局上下文中，<code>city</code>变量的值声明了<code>San Francisco</code>，因此引用了该变量<code>city</code>。现在我们有了变量的值，该函数<code>getPersonInfo</code>可以返回字符串<code>Sarah is 22 and lives in San Francisco</code>🎉。</p> <p><strong>您可以使用外部作用域，但不能访问更内部作用域</strong>。可以形象地看，类似一种瀑布：</p> <p><img src="https://user-images.githubusercontent.com/23453305/118242626-201e8380-b4d0-11eb-8c37-61b0ad4296df.png" alt="image"></p> <p>可以更深：</p> <p><img src="https://user-images.githubusercontent.com/23453305/118242778-43493300-b4d0-11eb-9d72-a4f4a0da3282.png" alt="image"></p> <p>让我们以这段代码为例：</p> <p><img src="https://user-images.githubusercontent.com/23453305/118242863-5825c680-b4d0-11eb-9109-7ade54150298.png" alt="image"></p> <p>几乎是一样的，但有一个很大的不同：我们仅在<code>getPersonInfo</code>函数内声明<code>city</code>，现在不是在全局作用域内。我们没有调用该getPersonInfo函数，因此也没有创建局部上下文。然而，我们试图访问全局作用域内的<code>name</code>，<code>age</code>和<code>city</code>。</p> <p><img src="https://user-images.githubusercontent.com/23453305/118244813-8c9a8200-b4d2-11eb-8096-016e66baa175.gif" alt="f3wvlo4c3gqf3mve1g0n"></p> <p>它抛出一个<code>ReferenceError</code>！它在全局作用域中找不到一个叫做city的变量的引用，并没有外部作用域可寻找，也不能去查找内部作用域链。</p> <p>这样，您可以使用作用域来“保护”变量并重新使用变量。</p> <p>除了全局和局部作用域外，还有一个块作用域。用<code>let</code>，<code>const</code>关键字声明的变量的作用域，在最接近的大括号范围内（<strong>{}</strong>）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">21</span>

<span class="token keyword">function</span> <span class="token function">checkAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>age <span class="token operator">&lt;</span> <span class="token number">21</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;You cannot drink!&quot;</span>
    <span class="token keyword">return</span> message
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;You can drink!&quot;</span>
    <span class="token keyword">return</span> message
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>作用域可视化为：</p> <p><img src="https://user-images.githubusercontent.com/23453305/118246361-7097e000-b4d4-11eb-9fd4-71865b2f7ec4.png" alt="image"></p> <p>这里有一个全局作用域，一个函数作用域和两个块作用域。由于<code>message</code>变量的作用域用大括号括起来，因此我们能够对变量进行两次声明。</p> <p><strong>快速回顾：</strong></p> <ul><li>可以将<strong>作用域链</strong>视为可以在当前上下文中访问的值的引用链。</li> <li>作用域可以重用在作用域链外部定义的变量名称，因为它只能访问作用域链外部变量，而不能访问作用域内部变量。</li></ul> <p>【完】</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/21/2022, 7:54:54 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/translation/hoisting.html" class="prev">
        可视化的JavaScript —— （二）提升
      </a></span> <span class="next"><a href="/docs/translation/jsengine.html">
        可视化的JavaScript —— （四）JS引擎
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.dc884916.js" defer></script><script src="/docs/assets/js/2.d55b7ed5.js" defer></script><script src="/docs/assets/js/32.cd1745a2.js" defer></script>
  </body>
</html>
